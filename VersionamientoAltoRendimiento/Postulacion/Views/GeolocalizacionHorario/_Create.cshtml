@model AltoRendimiento.Models.Geolocalizacion_Horario
@using System.Threading;
@using System.Globalization;
@{
    ViewBag.Title = "Create";
    Thread.CurrentThread.CurrentCulture = new CultureInfo("es-Es");
}
<script>
    $.fn.datepicker.dates['es'] = {
        days: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sabado'],
        daysShort: ['Dom', 'Lun', 'Mar', 'Mié', 'Juv', 'Vie', 'Sab'],
        daysMin: ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sa'],
        months: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
        monthsShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
        today: "Hoy",
        clear: "Limpiar",
        format: "mm/dd/yyyy",
        titleFormat: "MM yyyy", /* Leverages same syntax as 'format' */
        weekStart: 0
    };
</script>
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="myModalLabel">Nuevo Horario</h4>
</div>
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="modal-body">
        <div class="form-horizontal">
            @Html.ValidationSummary(true)

            @Html.Hidden("idGeolocalizacion", TempData["idGeolocalizacion"])
            @Html.Hidden("idTipoGasto", TempData["idTipoGasto"])
            @Html.Hidden("idBeneficiarioGastoPersonal", TempData["idBeneficiarioGastoPersonal"])
            @Html.Hidden("pendientes", TempData["pendientes"])
            @Html.Hidden("aceptarTope", null, new { id = "aceptarTope" })

            <div class="form-group" id="divFechaInicio">
                @Html.LabelFor(model => model.ghoFechaInicio, "Fecha Inicio", new { @class = "control-label col-md-3" })
                <div class="col-md-7">
                    <div class="input-group input-append date" id="ghoFechaInicio1" data-date-format="dd-mm-yyyy">
                        @Html.TextBoxFor(model => model.ghoFechaInicio, new { @class = "form-control", @id = "ghoFechaInicio" })
                        <span class="input-group-addon glyphicon glyphicon-calendar"></span>
                    </div>

                    @Html.ValidationMessageFor(model => model.ghoFechaInicio)

                </div>
            </div> 

            <div class="form-group" id="divFechaFin">
                @Html.LabelFor(model => model.ghoFechaFin, "Fecha Fin", new { @class = "control-label col-md-3" })
                <div class="col-md-7">
                    <div class="input-group input-append date" id="ghoFechaFin1" data-date-format="dd-mm-yyyy">
                        @Html.TextBoxFor(model => model.ghoFechaFin, new { @class = "form-control", @id = "ghoFechaFin" })
                        <span class="input-group-addon glyphicon glyphicon-calendar"></span>
                    </div>
                    @Html.ValidationMessageFor(model => model.ghoFechaFin)
                     </div>
            </div>


            <script>

                var checkin = $('#ghoFechaInicio1').datepicker({
                    language: 'es'
                }).on('changeDate', function (ev) {
                    checkin.hide();
                }).data('datepicker');

                var checkout = $('#ghoFechaFin1').datepicker({
                    language: 'es'
                }).on('changeDate', function (ev) {
                    checkout.hide();
                }).data('datepicker');

            </script>





            <label for="InfoProd" id="InfoProd" class="col-md-9 col-md-offset-3" style="font-size:x-small">Información: El producto comienza en @CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(@ViewBag.Producto.prdMesDesde) y finaliza en @CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(@ViewBag.Producto.prdMesHasta)</label><br />

            <div class="form-group">
                <label class="col-md-3 control-label">Dias </label>
                <div class="col-md-7">
                     
                    <table style="width:100%">
                        <tr>
                            <th>L</th>
                            <th>M</th>
                            <th>X</th>
                            <th>J</th>
                            <th>V</th>
                            <th>S</th>
                            <th>D</th>
                        </tr>
                        <tr>
                            <td>@Html.CheckBox("chkLunes", false, new { })</td>
                            <td>@Html.CheckBox("chkMartes", false, new { })</td>
                            <td>@Html.CheckBox("chkMiercoles", false, new { })</td>
                            <td>@Html.CheckBox("chkJueves", false, new { })</td>
                            <td>@Html.CheckBox("chkViernes", false, new { })</td>
                            <td>@Html.CheckBox("chkSabado", false, new { })</td>
                            <td>@Html.CheckBox("chkDomingo", false, new { })</td> 
                        </tr>
                    </table>
                    @Html.ValidationMessage("Dias")
                </div>
            </div>


            <div class="form-group">

                <label class="col-md-3 control-label">Hora Inicio</label>
                <div class="col-md-7">
                    <div class="input-group clockpicker" data-placement="bottom" data-align="top" data-autoclose="true">
                        @Html.TextBoxFor(model => model.ghoHoraInicio, new { @class = "form-control" })
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-time"></span>
                        </span>
                    </div>
                    @Html.ValidationMessageFor(model => model.ghoHoraInicio)
                    <script type="text/javascript">
                        $('.clockpicker').clockpicker();
                    </script>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Hora Fin</label>
                <div class="col-md-7">
                    <div class="input-group clockpicker" data-placement="bottom" data-align="top" data-autoclose="true">
                        @Html.TextBoxFor(model => model.ghoHoraFin, new { @class = "form-control" })
                        <span class="input-group-addon">
                            <span class="glyphicon glyphicon-time"></span>
                        </span>
                    </div>
                    @Html.ValidationMessageFor(model => model.ghoHoraFin)
                    <script type="text/javascript">
                        $('.clockpicker').clockpicker();
                    </script>
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Periódico</label>
                <div class="col-md-7">
                    @Html.CheckBox("ghoPeriodico", false, new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.ghoPeriodico)
                </div>
            </div>

            <div class="form-group">
                <label class="col-md-3 control-label">Observación</label>
                <div class="col-md-7">
                    @Html.TextAreaFor(model => model.ghoObservacion, new { @class = "form-control", @rows = 3 })
                    @Html.ValidationMessageFor(model => model.ghoObservacion)
                </div>
            </div> 
        </div>
    </div>
    <div class="text-danger col-md-offset-1 ">@ViewData["Mensaje"]</div><br />
     <div class="modal-footer">
        <button type="button" class="btn btn-sm btn-danger pull-left" data-dismiss="modal">Cancelar</button>
        <button type="submit" id="btnGuardar" class="btn btn-sm btn-success">Guardar</button>
    </div>
}
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script>
    var codError = '@TempData["codError"]';
    if(codError == '11')
    {
        var aceptaTopeHorario = confirm('@TempData["mensaje"]' + ", ¿Desea Continuar?")
        if(aceptaTopeHorario)
        {
            $("#aceptarTope").val(1);
            $("form").submit();
        }else
        {
            false;
        }
    }
</script>

<style>
    .popover {
        z-index: 999999;
    }

    .clockpicker-popover {
        z-index: 999999;
    }
</style>
