@model AltoRendimiento.Administracion.Models.BandejaEntradaModel
@*<link href="~/Content/jquery.dataTables.min.css" rel="stylesheet" />*@
<script src="~/Scripts/jquery.dataTables.min.js"></script>
<script src="~/Scripts/jquery.validate-vsdoc.js"></script>
<script src="~/Scripts/dataTables.bootstrap.min.js"></script>
<script src="~/Scripts/modalform.js"></script>
<link href="~/Content/dataTables.bootstrap.min.css" rel="stylesheet" />

<script type="text/javascript">
    $(document).ready(function () {



        $("#TableProyecto").DataTable({
            "language":
              {
                  "sProcessing": "Procesando...",
                  "sLengthMenu": "Mostrar _MENU_ registros",
                  "sZeroRecords": "No se encontraron resultados",
                  "sEmptyTable": "NingÃºn dato disponible en esta tabla",
                  "sInfo": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                  "sInfoEmpty": "Mostrando registros del 0 al 0 de un total de 0 registros",
                  "sInfoFiltered": "(filtrado de un total de _MAX_ registros)",
                  "sInfoPostFix": "",
                  "sSearch": "Buscar:",
                  "sUrl": "",
                  "sInfoThousands": ",",
                  "sLoadingRecords": "Cargando...",
                  "oPaginate": {
                      "sFirst": "Primero",
                      "sLast": "Ãšltimo",
                      "sNext": "Siguiente",
                      "sPrevious": "Anterior"
                  },
                  "oAria": {
                      "sSortAscending": ": Activar para ordenar la columna de manera ascendente",
                      "sSortDescending": ": Activar para ordenar la columna de manera descendente"
                  }
              }
        }).on("draw.dt", function () {
            addEventClickDataModal();
        });



    });
</script>

<div class="container">
    <div id='myModal' class='modal fade in'>
        <div class="modal-dialog">
            <div class="modal-content">
                <div id='myModalContent'></div>
            </div>
        </div>
    </div>
</div>
<div class="table-responsive">
    <table id="TableProyecto" class="table table-condensed table-bordered table-hover">
        <thead>
            <tr>
                <th class="col-xs-1">
                    Código
                </th>
                <th class="col-xs-3">
                    Proyecto
                </th>
                <th class="col-xs-1">
                    Acción
                </th>

            </tr>
        </thead>
        <tbody>

            @foreach (var row in Model.ListaReProceso)
            {

                <tr>
                    <td>@row.CodigoProyecto</td>
                    <td>@row.Proyecto</td>
                    <td>
                        @{
                if (row.hdaEnvio == false)
                {
                    @Html.Raw(@Html.ActionLink("[replacetext]" , "Envio" , new { FolioProyeto = @row.CodigoProyecto } , new { @class = "fa fa-arrow-right fa-lg" , @data_toggle = "tooltip" , @title = "Enviar Proyecto" }).ToHtmlString().Replace("[replacetext]" , "").TrimEnd())

                }
                else
                {
                    <i class="fa fa-lock fa-lg" aria-hidden="true"></i>
                }

                if (row.hdaDesbloqueo == false)
                {
                    @Html.Raw(@Html.ActionLink("[replacetext]" , "Desbloqueo" , new { FolioProyeto = @row.CodigoProyecto } , new { @class = "fa fa-check-circle-o fa-lg" , @data_toggle = "tooltip" , @title = "Desbloqueo Proyecto" }).ToHtmlString().Replace("[replacetext]" , "").TrimEnd())

                }
                else
                {
                    <i class="fa fa-lock fa-lg" aria-hidden="true"></i>
                }

                if (row.hdaAprobado == false)
                {
                                          
                   @Html.Raw(@Html.ActionLink("[replacetext]" , "Aprobacion" , new { FolioProyeto = @row.CodigoProyecto } , new { @class = "fa fa-check-circle-o fa-lg" , @data_toggle = "tooltip" , @title = "Aprobar Proyecto" }).ToHtmlString().Replace("[replacetext]" , "").TrimEnd())             
                           
                }
                else
                {
                    <i class="fa fa-lock fa-lg" aria-hidden="true"></i>
                }


                        }


                    </td>
                </tr>

            }
        </tbody>
    </table>
</div>
<script type="text/javascript">
    function VerProyecto(idProyecto) {
        var url = "http://www.proyectosdeportivos.cl/AltoRendimiento/IndReportes/Default.aspx?idreporte=1&idproyecto=" + idProyecto
        window.open(url)
    }
    function UpReproceso(idproyecto) {


        var url = '@Url.Action("UpAprobar")';
        $.ajax({
            url: url,
            type: 'POST',
            data: { FolioProyeto: idproyecto },
            success: function (data) {
                $('#myModalContent').html(data);
                $('#myModal').modal('show');
            },
            error: function () {
                //alert("error");
            }
        });
    }

</script>

